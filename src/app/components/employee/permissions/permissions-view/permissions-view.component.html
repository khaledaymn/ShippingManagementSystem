<div class="permissions-container">
  <app-notification></app-notification>
  <!-- Action Bar -->
  <div class="action-bar" [class.no-action-left]="!canCreate">
    <div class="action-left" *ngIf="canCreate">
      <button class="btn btn-primary" (click)="addGroup()" [disabled]="loading">
        <i class="bi bi-plus-circle"></i>
        Add New Group
      </button>
      <button
        class="btn btn-danger"
        (click)="confirmBulkDelete()"
        [disabled]="selectedItems.length === 0 || loading"
        *ngIf="tableConfig.selectable"
      >
        <i class="bi bi-trash"></i>
        Delete Selected ({{ selectedItems.length }})
      </button>
    </div>

    <div class="action-right" [class.no-action-left-right]="!canCreate">
      <button class="btn btn-outline-secondary" (click)="toggleSelection()" *ngIf="canCreate">
        <i class="bi" [class]="tableConfig.selectable ? 'bi-check-square' : 'bi-square'"></i>
        {{ tableConfig.selectable ? 'Hide' : 'Show' }} Selection
      </button>
      <button
        class="btn btn-outline-secondary"
        (click)="exportGroups()"
        [disabled]="loading"
      >
        <i class="bi bi-download"></i>
        Export
      </button>
      <button
        class="btn btn-outline-secondary"
        (click)="refreshData()"
        [disabled]="loading"
      >
        <i class="bi bi-arrow-clockwise"></i>
        Refresh
      </button>
    </div>
  </div>

  <!-- Main Content -->
  <div class="content-card">
    <app-table
      [config]="tableConfig"
      [data]="tableData"
      [loading]="loading"
      [error]="error"
      title="Permission Groups"
      subtitle="Manage and configure user permission groups"
      (tableEvent)="onTableEvent($event)"
    ></app-table>
  </div>

  <!-- Confirmation Dialog -->
  <app-confirmation-dialog
    [show]="showDialog"
    [data]="dialogData"
    [loading]="loading"
    (confirmed)="onConfirmDelete()"
    (cancelled)="onCancelDelete()"
  ></app-confirmation-dialog>
</div>
